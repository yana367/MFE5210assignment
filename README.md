# MFE5210assignment
## 项目概述
该项目使用 Python 进行股票因子策略的回测，涵盖动量、均值回归、波动率、成交量突增和 RSI 五种常见因子。通过对 20 只股票的因子信号进行回测，计算每个因子的夏普比率，并生成累积盈亏曲线和因子相关性热力图，帮助分析各因子在不同市场条件下的表现。
1. 数据下载:该脚本从 Yahoo Finance 下载指定股票的历史数据，包括收盘价格（Adj Close）和成交量（Volume）。可用于回测的数据集包含以下股票：
	•	AAPL\MSFT\GOOGL\AMZN\META\NVDA\TSLA\BRK-B\JPM\JNJ\V\PG\XOM\UNH\HD\MA\BAC\PFE\ADBE\KO
2. 因子计算
为每只股票计算以下因子：
	•	Momentum（动量因子）：基于过去 20 天的收益计算动量因子。
	•	MeanReversion（均值回归因子）：基于过去 20 天的价格，计算均值回归因子。
	•	Volatility（波动率因子）：基于价格变化的标准差计算波动率因子。
	•	VolumeSpike（成交量突增因子）：基于成交量变化的平均值计算成交量突增因子。
	•	RSI（相对强弱指数）：计算 14 天的相对强弱指数（RSI）。
3. 因子信号生成

基于因子值的排名，生成做多（Top 30%）和做空（Bottom 30%）的信号：
	•	做多：选择因子排名前 30% 的股票。
	•	做空：选择因子排名后 30% 的股票。

4. 回测策略

根据每个因子的信号生成相应的回测策略，并计算每日盈亏（PNL）。绘制策略的累积盈亏曲线（Equity Curve）。

5. 夏普比率计算

每个因子策略的夏普比率（Sharpe Ratio）被计算并输出，帮助评估因子策略的风险调整后收益。

6. 结果输出
	•	夏普比率：每个因子的夏普比率被保存到 sharpe_ratios.csv 文件中。
	•	因子数据：包含因子值的详细数据被保存到 alpha_factors_stacked.csv 文件中。
	•	PNL系列：每个因子的每日PNL被单独保存到文件。
	•	因子相关矩阵：输出所有因子之间的相关矩阵，并绘制相关矩阵热力图。

7. 图形展示
	•	累积盈亏曲线：为每个因子策略生成累积盈亏曲线。
	•	因子相关矩阵热力图：展示因子之间的相关性，帮助评估因子之间的关系。
